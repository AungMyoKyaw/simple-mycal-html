<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet" />
    <script src="https://unpkg.com/mycal@latest/dist/client/mycal.min.js"></script>
    <title>Myanmar Calendar</title>
    <style>
      .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 1rem;
      }
      .calendar-cell {
        background: #fff5e1;
        padding: 1rem;
        border-radius: 0.5rem;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s;
        min-height: 100px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      .calendar-cell:hover {
        background: #ffebcd;
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }
      .header div {
        flex: 1;
      }
      .nav-button {
        background-color: #4a90e2;
        color: #fff;
        padding: 0.5rem 1rem;
        border-radius: 0.25rem;
        transition: background-color 0.3s;
      }
      .nav-button:hover {
        background-color: #357abd;
      }
      .calendar-title {
        font-size: 1.5rem;
        font-weight: bold;
        text-align: center;
        margin-bottom: 1rem;
      }
      @media (max-width: 640px) {
        .calendar-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-900 flex items-center justify-center min-h-screen">
    <main class="bg-white p-6 rounded-lg shadow-lg w-full max-w-4xl">
      <header class="header">
        <button id="prevMonth" class="nav-button">&lt; Prev</button>
        <div class="flex justify-center items-center">
          <input type="month" id="monthPicker" class="border rounded p-2" />
          <button id="goToMonth" class="nav-button ml-2">Go</button>
        </div>
        <button id="nextMonth" class="nav-button">Next &gt;</button>
      </header>
      <h1 id="calendarTitle" class="calendar-title"></h1>
      <section id="calendar" class="calendar-grid"></section>
    </main>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const calendarElement = document.getElementById("calendar");
        const calendarTitle = document.getElementById("calendarTitle");
        const prevMonthButton = document.getElementById("prevMonth");
        const nextMonthButton = document.getElementById("nextMonth");
        const monthPicker = document.getElementById("monthPicker");
        const goToMonthButton = document.getElementById("goToMonth");

        let currentYear = new Date().getFullYear();
        let currentMonth = new Date().getMonth();

        monthPicker.value = `${currentYear}-${String(currentMonth + 1).padStart(2, "0")}`;

        function renderCalendar(year, month) {
          calendarElement.innerHTML = "";
          calendarTitle.innerText = `${getMonthName(month)} ${year}`;

          const daysInMonth = new Date(year, month + 1, 0).getDate();
          const firstDay = new Date(year, month, 1).getDay();

          fillInitialEmptyCells(firstDay);
          fillDaysOfMonth(year, month, daysInMonth);
        }

        function fillInitialEmptyCells(firstDay) {
          for (let i = 0; i < firstDay; i++) {
            calendarElement.appendChild(createEmptyCell());
          }
        }

        function fillDaysOfMonth(year, month, daysInMonth) {
          for (let day = 1; day <= daysInMonth; day++) {
            calendarElement.appendChild(createCalendarCell(year, month, day));
          }
        }

        function createEmptyCell() {
          const cell = document.createElement("div");
          cell.className = "calendar-cell";
          return cell;
        }

        function createCalendarCell(year, month, day) {
          const cell = document.createElement("div");
          cell.className = "calendar-cell";

          const date = new Date(year, month, day);
          const dateString = `${month + 1}/${day}/${year}`;
          const myanmarDate = new mycal(dateString);

          cell.innerHTML = `
            <div class="date">${day}</div>
            <div class="myanmar-date">
                <p class="text-xs">${myanmarDate.month.my}</p>
                <p class="text-xs">${myanmarDate.day.mp.my}</p>
                <p class="text-xs">${myanmarDate.day.fd.my}</p>
                <p class="text-xs">${myanmarDate.weekday.my}</p>
                <p class="text-xs">${myanmarDate.year.my}</p>
            </div>
        `;
          return cell;
        }

        function getMonthName(month) {
          const monthNames = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December",
          ];
          return monthNames[month];
        }

        function updateMonthPicker() {
          monthPicker.value = `${currentYear}-${String(currentMonth + 1).padStart(2, "0")}`;
        }

        prevMonthButton.addEventListener("click", () => {
          currentMonth--;
          if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
          }
          updateMonthPicker();
          renderCalendar(currentYear, currentMonth);
        });

        nextMonthButton.addEventListener("click", () => {
          currentMonth++;
          if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
          }
          updateMonthPicker();
          renderCalendar(currentYear, currentMonth);
        });

        goToMonthButton.addEventListener("click", () => {
          const [year, month] = monthPicker.value.split("-").map(Number);
          currentYear = year;
          currentMonth = month - 1;
          renderCalendar(currentYear, currentMonth);
        });

        renderCalendar(currentYear, currentMonth);
      });
    </script>
  </body>
</html>
